local UIS = game:GetService("UserInputService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local root = character:WaitForChild("HumanoidRootPart")
local trashs = workspace:WaitForChild("Dev-WorkSpace"):WaitForChild("Dev-Garbage"):WaitForChild("trashs")

local gui = Instance.new("ScreenGui")
gui.Name = "ModyUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 150)
frame.Position = UDim2.new(0.5, -150, 1, -170)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
frame.BorderSizePixel = 0
frame.Parent = gui

local uiCorner = Instance.new("UICorner", frame)
uiCorner.CornerRadius = UDim.new(0, 10)

local uiStroke = Instance.new("UIStroke", frame)
uiStroke.Thickness = 2
uiStroke.Color = Color3.fromRGB(0, 200, 0)

local activateBtn = Instance.new("TextButton")
activateBtn.Size = UDim2.new(1, -20, 0.4, -10)
activateBtn.Position = UDim2.new(0, 10, 0, 10)
activateBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
activateBtn.Text = "Activate Nearby"
activateBtn.TextColor3 = Color3.new(1, 1, 1)
activateBtn.Font = Enum.Font.GothamBold
activateBtn.TextSize = 20
activateBtn.Parent = frame

local autoBtn = Instance.new("TextButton")
autoBtn.Size = UDim2.new(1, -20, 0.4, -10)
autoBtn.Position = UDim2.new(0, 10, 0.55, 0)
autoBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
autoBtn.Text = "Auto Mode"
autoBtn.TextColor3 = Color3.new(1, 1, 1)
autoBtn.Font = Enum.Font.GothamBlack
autoBtn.TextSize = 20
autoBtn.Parent = frame

local function getClosest()
	local closest, shortest = nil, math.huge
	for _, obj in ipairs(trashs:GetChildren()) do
		if obj:IsA("BasePart") then
			local dist = (obj.Position - root.Position).Magnitude
			if dist < shortest and dist <= 10 then
				closest = obj
				shortest = dist
			end
		end
	end
	return closest
end

local function activateTarget(target)
	if not target then return end
	local prompt = target:FindFirstChildWhichIsA("ProximityPrompt")
	local click = target:FindFirstChild("ClickDetector")
	local time = 1
	if prompt and prompt:FindFirstChild("ActivationTime") then
		time = tonumber(prompt.ActivationTime) or 1
	elseif target:FindFirstChild("ActivationTime") then
		time = tonumber(target.ActivationTime.Value) or 1
	end
	character:PivotTo(CFrame.new(target.Position + Vector3.new(0, 3, 0)))
	task.wait(0.3)
	if prompt then
		fireproximityprompt(prompt)
	elseif click then
		fireclickdetector(click)
	end
	task.wait(time + 0.5)
end

activateBtn.MouseButton1Click:Connect(function()
	local target = getClosest()
	activateTarget(target)
end)

autoBtn.MouseButton1Click:Connect(function()
	for _, obj in ipairs(trashs:GetChildren()) do
		if obj:IsA("BasePart") then
			activateTarget(obj)
			task.wait(0.5)
		end
	end
end)

UIS.InputBegan:Connect(function(input, gpe)
	if gpe then return end
	if input.KeyCode == Enum.KeyCode.E or input.UserInputType == Enum.UserInputType.Touch then
		local target = getClosest()
		activateTarget(target)
	end
end)
